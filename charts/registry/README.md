# registry

![Version: 0.6.2](https://img.shields.io/badge/Version-0.6.2-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 0.6.2](https://img.shields.io/badge/AppVersion-0.6.2-informational?style=flat-square)

**Tractus-X Digital Twin Registry Helm Chart**<br/>
This Helm charts install the Digital Twin Registry and its dependencies.

## Requirements

| Repository | Name | Version |
|------------|------|---------|
| https://charts.bitnami.com/bitnami | keycloak | 13.3.0 |
| https://charts.bitnami.com/bitnami | postgresql | 12.1.7 |

## Prerequisites
- Kubernetes 1.19+
- Helm 3.2.0+
- PV provisioner support in the underlying infrastructure

## Install
```
helm dep up charts/registry

kubectl create namespace semantics

helm install registry -n semantics charts/registry

```


## Values

| Key                                            | Type   | Default                                                                                                                                                       | Description                                                                                 |
|------------------------------------------------|--------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|
| enableKeycloak                                 | bool   | `true`                                                                                                                                                        |                                                                                             |
| enablePostgres                                 | bool   | `true`                                                                                                                                                        |                                                                                             |
| keycloak.args[0]                               | string | `"kc.sh import --file /opt/keycloak/data/import/default-realm-import.json; kc.sh start-dev --hostname=registry-keycloak --hostname-strict=false --proxy=edge"` |                                                                                             |
| keycloak.auth.adminPassword                    | string | `"admin"`                                                                                                                                                     |                                                                                             |
| keycloak.auth.adminUser                        | string | `"admin"`                                                                                                                                                     |                                                                                             |
| keycloak.command[0]                            | string | `"/bin/sh"`                                                                                                                                                   |                                                                                             |
| keycloak.command[1]                            | string | `"-c"`                                                                                                                                                        |                                                                                             |
| keycloak.externalDatabase.existingSecret       | string | `"keycloak-database-credentials"`                                                                                                                             |                                                                                             |
| keycloak.extraVolumeMounts[0].mountPath        | string | `"/opt/keycloak/data/import/default-realm-import.json"`                                                                                                       |                                                                                             |
| keycloak.extraVolumeMounts[0].name             | string | `"registry-keycloak-configmap"`                                                                                                                               | default is "{{ .Values.keycloak.fullnameOverride }}-configmap"                              |
| keycloak.extraVolumeMounts[0].subPath          | string | `"default-realm-import.json"`                                                                                                                                 |                                                                                             |
| keycloak.extraVolumes[0].configMap.name        | string | `"registry-keycloak-configmap"`                                                                                                                                           | default is "{{ .Values.keycloak.fullnameOverride }}-configmap"                                                                                            |
| keycloak.extraVolumes[0].name                  | string | `"registry-keycloak-configmap"`                                                                                                                                           | default is "{{ .Values.keycloak.fullnameOverride }}-configmap"                                                                                            |
| keycloak.fullnameOverride                      | string | `"registry-keycloak"`                                                                                                                                         |                                                                                             |
| keycloak.postgresql.enabled                    | bool   | `false`                                                                                                                                                       |                                                                                             |
| keycloak.service.type                          | string | `"ClusterIP"`                                                                                                                                                 |                                                                                             |
| postgresql.auth.database                       | string | `"default-database"`                                                                                                                                          |                                                                                             |
| postgresql.auth.password                       | string | `"password"`                                                                                                                                                  |                                                                                             |
| postgresql.auth.username                       | string | `"default-user"`                                                                                                                                              |                                                                                             |
| postgresql.primary.persistence.enabled         | bool   | `true`                                                                                                                                                        |                                                                                             |
| postgresql.primary.persistence.size            | string | `"50Gi"`                                                                                                                                                      |                                                                                             |
| postgresql.service.ports.postgresql            | int    | `5432`                                                                                                                                                        |                                                                                             |
| registry.authentication                        | bool   | `true`                                                                                                                                                        |                                                                                             |
| registry.containerPort                         | int    | `4243`                                                                                                                                                        |                                                                                             |
| registry.dataSource.driverClassName            | string | `"org.postgresql.Driver"`                                                                                                                                     |                                                                                             |
| registry.dataSource.password                   | string | `""`                                                                                                                                                          |                                                                                             |
| registry.dataSource.sqlInitPlatform            | string | `"pg"`                                                                                                                                                        |                                                                                             |
| registry.dataSource.url                        | string | `"jdbc:postgresql://database:5432"`                                                                                                                           |                                                                                             |
| registry.dataSource.user                       | string | `"default-user"`                                                                                                                                              |                                                                                             |
| registry.host                                  | string | `"minikube"`                                                                                                                                                  |                                                                                             |
| registry.identityProvider                      | string | `"keycloak"`                                                                                                                                                  |                                                                                             |
| registry.idpClientId                           | string | `"default-client"`                                                                                                                                            |                                                                                             |
| registry.idpInternalClientId                   | string | `"default-client"`                                                                                                                                            |                                                                                             |
| registry.idpIssuerUri                          | string | `""`                                                                                                                                                          |                                                                                             |
| registry.image.registry                        | string | `"docker.io"`                                                                                                                                                 |                                                                                             |
| registry.image.repository                      | string | `"tractusx/sldt-digital-twin-registry"`                                                                                                                       |                                                                                             |
| registry.image.version                         | string | `""`                                                                                                                                                          |                                                                                             |
| registry.imagePullPolicy                       | string | `"IfNotPresent"`                                                                                                                                              |                                                                                             |
| registry.ingress.annotations                   | object | `{}`                                                                                                                                                          |                                                                                             |
| registry.ingress.className                     | string | `"nginx"`                                                                                                                                                     |                                                                                             |
| registry.ingress.enabled                       | bool   | `false`                                                                                                                                                       |                                                                                             |
| registry.ingress.tls                           | bool   | `false`                                                                                                                                                       |                                                                                             |
| registry.ingress.urlPrefix                     | string | `"/semantics/registry"`                                                                                                                                       |                                                                                             |
| registry.replicaCount                          | int    | `1`                                                                                                                                                           |                                                                                             |
| registry.resources.limits.memory               | string | `"1024Mi"`                                                                                                                                                    |                                                                                             |
| registry.resources.requests.memory             | string | `"512Mi"`                                                                                                                                                     |                                                                                             |
| registry.service.port                          | int    | `8080`                                                                                                                                                        |                                                                                             |
| registry.service.type                          | string | `"ClusterIP"`                                                                                                                                                 |                                                                                             |
| registry.tenantId                              | string | `"default-tenant"`                                                                                                                                            |                                                                                             |
| registry.externalSubjectIdWildcardPrefix       | string | `PUBLIC_READABLE`                                                                                                                                             |                                                                                             |
| registry.externalSubjectIdWildcardAllowedTypes | string | `manufacturerPartId,assetLifecyclePhase`                                                                                                                      |                                                                                             |
| registry.livenessProbe.initialDelaySeconds     | int    | `100`                                                                                                                                                         |                                                                                             |
| registry.livenessProbe.failureThreshold        | int    | `3`                                                                                                                                                           |                                                                                             |
| registry.livenessProbe.periodSeconds           | int    | `3`                                                                                                                                                           |                                                                                             |
| registry.readinessProbe.initialDelaySeconds    | int    | `100`                                                                                                                                                         |                                                                                             |
| registry.readinessProbe.failureThreshold       | int    | `3`                                                                                                                                                           |                                                                                             |
| registry.readinessProbe.periodSeconds          | int    | `3`                                                                                                                                                           |                                                                                             |
| registry.useGranularAccessControl              | string | `"true"`                                                                                                                                                      | Turns the granular access control on/off.                                                   |
| registry.granularAccessControlFetchSize        | string | `"500"`                                                                                                                                                       | Defines how many records should be fetched in one query when using granular access control. |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.11.0](https://github.com/norwoodj/helm-docs/releases/v1.11.0)

<?xml version="1.0" encoding="UTF-8"?>
<!--
    Copyright (c) 2024 Robert Bosch Manufacturing Solutions GmbH and others
    Copyright (c) 2024 Contributors to the Eclipse Foundation

    See the NOTICE file(s) distributed with this work for additional
    information regarding copyright ownership.

    This program and the accompanying materials are made available under the
    terms of the Apache License, Version 2.0 which is available at
    https://www.apache.org/licenses/LICENSE-2.0.

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
    License for the specific language governing permissions and limitations
    under the License.

    SPDX-License-Identifier: Apache-2.0
  -->

<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
   <modelVersion>4.0.0</modelVersion>
   <parent>
      <groupId>org.eclipse.tractusx</groupId>
      <artifactId>digital-twin-registry</artifactId>
      <version>DEV-SNAPSHOT</version>
      <relativePath>../pom.xml</relativePath>
   </parent>

   <groupId>org.eclipse.tractusx.digital_twin_registry</groupId>
   <artifactId>digital-twin-registry-access-control-service-sql-impl</artifactId>
   <name>Tractus-X Semantic Layer Digital Twin Registry SQL Backed Access Control Implementation</name>
   <description>
      Module contains the Semantic Layer Digital Twin Registry Service's access control service implementation
      using a SQL DB as the source of the rules.
   </description>
   <packaging>jar</packaging>

   <organization>
      <name>${organization}</name>
      <url>${url}</url>
   </organization>

   <licenses>
      <license>
         <name>${licence_name}</name>
         <url>${licence_url}</url>
         <distribution>${licence_distribution}</distribution>
         <comments>${licence_comments}</comments>
      </license>
   </licenses>

   <dependencies>
      <dependency>
         <groupId>org.projectlombok</groupId>
         <artifactId>lombok</artifactId>
      </dependency>
      <dependency>
         <groupId>org.eclipse.tractusx.digital_twin_registry</groupId>
         <artifactId>digital-twin-registry-access-control-service-interface</artifactId>
      </dependency>
      <dependency>
         <groupId>org.springframework</groupId>
         <artifactId>spring-context</artifactId>
      </dependency>
      <dependency>
         <groupId>org.springframework</groupId>
         <artifactId>spring-web</artifactId>
      </dependency>
      <dependency>
         <groupId>org.springframework</groupId>
         <artifactId>spring-tx</artifactId>
      </dependency>
      <dependency>
         <groupId>org.springframework.data</groupId>
         <artifactId>spring-data-jpa</artifactId>
      </dependency>
      <dependency>
         <groupId>jakarta.servlet</groupId>
         <artifactId>jakarta.servlet-api</artifactId>
      </dependency>
      <dependency>
         <groupId>jakarta.validation</groupId>
         <artifactId>jakarta.validation-api</artifactId>
      </dependency>
      <dependency>
         <groupId>jakarta.persistence</groupId>
         <artifactId>jakarta.persistence-api</artifactId>
      </dependency>
      <dependency>
         <groupId>jakarta.annotation</groupId>
         <artifactId>jakarta.annotation-api</artifactId>
      </dependency>
      <dependency>
         <groupId>com.fasterxml.jackson.core</groupId>
         <artifactId>jackson-databind</artifactId>
      </dependency>
      <dependency>
         <groupId>com.fasterxml.jackson.datatype</groupId>
         <artifactId>jackson-datatype-jsr310</artifactId>
      </dependency>
      <dependency>
         <groupId>org.openapitools</groupId>
         <artifactId>jackson-databind-nullable</artifactId>
      </dependency>
      <dependency>
         <groupId>io.swagger.core.v3</groupId>
         <artifactId>swagger-annotations</artifactId>
      </dependency>
      <dependency>
         <groupId>org.apache.commons</groupId>
         <artifactId>commons-lang3</artifactId>
      </dependency>

      <!-- Mapping -->
      <dependency>
         <groupId>org.mapstruct</groupId>
         <artifactId>mapstruct</artifactId>
      </dependency>

      <!-- Tests -->
      <dependency>
         <groupId>org.assertj</groupId>
         <artifactId>assertj-core</artifactId>
      </dependency>
      <dependency>
         <groupId>org.junit.jupiter</groupId>
         <artifactId>junit-jupiter</artifactId>
      </dependency>
      <dependency>
         <groupId>org.slf4j</groupId>
         <artifactId>slf4j-simple</artifactId>
      </dependency>
      <dependency>
         <groupId>org.mockito</groupId>
         <artifactId>mockito-core</artifactId>
         <scope>test</scope>
      </dependency>
      <dependency>
         <groupId>org.hibernate.validator</groupId>
         <artifactId>hibernate-validator</artifactId>
         <scope>test</scope>
      </dependency>
      <dependency>
         <groupId>org.apache.tomcat.embed</groupId>
         <artifactId>tomcat-embed-el</artifactId>
         <scope>test</scope>
      </dependency>
   </dependencies>
   <build>
      <plugins>
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
         </plugin>

         <plugin>
            <groupId>io.github.git-commit-id</groupId>
            <artifactId>git-commit-id-maven-plugin</artifactId>
         </plugin>

         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
         </plugin>

         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-deploy-plugin</artifactId>
         </plugin>
         <plugin>
            <groupId>org.openapitools</groupId>
            <artifactId>openapi-generator-maven-plugin</artifactId>
            <executions>
               <execution>
                  <id>generate-aas-registry-api-stubs</id>
                  <goals>
                     <goal>generate</goal>
                  </goals>
                  <configuration>
                     <inputSpec>${project.basedir}/src/main/resources/static/access-control-openapi.yaml</inputSpec>
                     <generatorName>spring</generatorName>
                     <generateSupportingFiles>true</generateSupportingFiles>
                     <packageName>org.eclipse.tractusx.semantics.accesscontrol.sql.rest</packageName>
                     <modelPackage>org.eclipse.tractusx.semantics.accesscontrol.sql.rest.model</modelPackage>
                     <apiPackage>org.eclipse.tractusx.semantics.accesscontrol.sql.rest.api</apiPackage>

                     <supportingFilesToGenerate>ApiUtil.java</supportingFilesToGenerate>
                     <configOptions>
                        <oas3>true</oas3>
                        <delegatePattern>true</delegatePattern>
                        <packageName>org.eclipse.tractusx</packageName>
                        <useBeanValidation>true</useBeanValidation>
                        <useSpringfox>false</useSpringfox>
                        <useSpringBoot3>true</useSpringBoot3>
                     </configOptions>
                     <invokerPackage>org.eclipse.tractusx.semantics</invokerPackage>
                  </configuration>
               </execution>
            </executions>
         </plugin>
      </plugins>
   </build>
</project>